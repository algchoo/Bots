package jokebot;
import bot.Bot;
import api.*;

import java.util.ArrayList;
import java.util.List;
import java.util.Scanner;
import java.util.StringTokenizer;

public class JokeBot extends Bot {

    // Counter for incorrect keypress
    private int keyFailure = 0;

    public void titleScreen() {
        System.out.println(" _     _  _______  ___      _______  _______  __   __  _______    _______  _______ \n" +
                "| | _ | ||       ||   |    |       ||       ||  |_|  ||       |  |       ||       |\n" +
                "| || || ||    ___||   |    |       ||   _   ||       ||    ___|  |_     _||   _   |\n" +
                "|       ||   |___ |   |    |       ||  | |  ||       ||   |___     |   |  |  | |  |\n" +
                "|       ||    ___||   |___ |      _||  |_|  ||       ||    ___|    |   |  |  |_|  |\n" +
                "|   _   ||   |___ |       ||     |_ |       || ||_|| ||   |___     |   |  |       |\n" +
                "|__| |__||_______||_______||_______||_______||_|   |_||_______|    |___|  |_______|\n" +
                "     ___  _______  ___   _  _______  _______  _______  _______                     \n" +
                "    |   ||       ||   | | ||       ||  _    ||       ||       |                    \n" +
                "    |   ||   _   ||   |_| ||    ___|| |_|   ||   _   ||_     _|                    \n" +
                "    |   ||  | |  ||      _||   |___ |       ||  | |  |  |   |                      \n" +
                " ___|   ||  |_|  ||     |_ |    ___||  _   | |  |_|  |  |   |                      \n" +
                "|       ||       ||    _  ||   |___ | |_|   ||       |  |   |                      \n" +
                "|_______||_______||___| |_||_______||_______||_______|  |___|                      \n" +
                "                                                                                   \n" +
                "                                                                                   \n" +
                "                                                                                   \n" +
                "                                                                                   ");
    }

    @Override
    public void runBot() {

        System.out.println("[1] Hear a joke\n" +
                "[2] Create a joke\n" +
                "[3] List saved jokes");

        Scanner keyboardScanner = new Scanner(System.in);
        String keyPress = keyboardScanner.nextLine();

        switch (keyPress) {
            case "1" :
                try {
                    System.out.println(this.tellJoke());
                    Thread.sleep(2000);
                    this.runBot();
                } catch (InterruptedException e) {
                    return;
                    // Something about printing to standard error, maybe we log it?
                } catch (Exception e) {
                    return;
                    // Probably just log it
                }
            case "2" :
                this.saveJoke(createJoke());
                this.runBot();
            case "3" :
                // this.listJokes();
                break;
            default:
                keyFailure++;
        }

        switch (keyFailure) {
            case 1 :
                try {
                    System.out.println("\nThat is not the correct key!");
                    Thread.sleep(2000);
                    this.runBot();
                } catch (InterruptedException e) { return; }
                catch (Exception e) { return; }
            case 2 :
                try {
                    System.out.println("\nHey! You pressed the wrong key again!");
                    Thread.sleep(2000);
                    this.runBot();
                } catch (InterruptedException e) { return; }
                catch (Exception e) { return; }
            case 3 :
                try {
                    System.out.println("\nOkay then, now you're just doing it to see what happens...");
                    System.out.println("\nJust press the Y or N key on your keyboard....please?");
                    Thread.sleep(2000);
                    this.runBot();
                } catch (InterruptedException e) { return; }
                catch (Exception e) { return; }
            case 4 :
                System.out.println(this.spongeBob());
                System.exit(0);
        }
    }

    @Override
    public String doAction() {
        return tellJoke();
    }

    private void saveJoke(String s) {
        System.out.println(s);
    }

    private String createJoke() {
        // Prompt user for the setup
        System.out.println("The setup: ");
        List<String> userSetupInput = new ArrayList<>();
        String setup = new String("");

        Scanner scanner = new Scanner(System.in);
        StringTokenizer st = new StringTokenizer(scanner.nextLine());

        while (st.hasMoreElements()) {
            userSetupInput.add(st.nextToken());
        }

        for (String s : userSetupInput) {
            setup = setup.concat(s);
        }

        scanner.close();
        return setup;
    }

    private String tellJoke() {
        JSONReader jokeReader = new JSONReader();
        return jokeReader.readJokes();
    }

    private String spongeBob() {
         return "\n&##%#,(////////#//***////(%%%%&@%#%%%%#%%#&///###(/(#(((((#((((#(#(((((((((#((((##((((((#(((##(((##((((((((((((#&&%%%(,,,..,**#((%%%#%&%%##((((##(/(/##////((/////((/(/((///((////#/&#//(#(((((#(///(\n" +
                "&#%(/*//**#%&&&&&&&#/***///%#%%@#/%%%%#%%%%(/(#%(((((#((((#((((##((((##((((##(((##(######((((#((((##((((######%#&%&%%%%%%###%%%%%%%%#%&&%%#((((##((((##////#((((//((/(/((////(////(##%#//(////(#(///(\n" +
                "&#(**%/#%%&&%%%#(((%%&%//*//%(&&%#%%%%#%#%#&((#%((((##((((#((((##((((##((((##(((##((#(###(((((((((##((((###((##(##%%&&&%%%#(#%%%%%%#(&%%%%%((((#(/(/((#(//(########(/(/#(////(////(#(%%###/////##///(\n" +
                "(////(#&&%%%#(///##%%%%&((,%/%#&%#%%%%#%%##%#/(%(((((#(((##((((##((((##(((###(((##(#((###((((#((((##(((((((((%%%%%%%%%%%%%#&&%%%%%%%%%%&%%%((((##(((((#(///((((((##(/(/#(///(#////(#(#*(&(/////##///(\n" +
                ".////#&&%##/**/##%%%%%##%////((&##%%%%#%%%%#%/(%#((((#(((###&&&&%%%%%%%###%%####%###%#######&&##((##(((##(((####%%%%%%%%&&%%%%%%%%%%&&&&%%##(((##(((((#((//#////(##(///#/////#////(##/(.%&/////##///(\n" +
                "///*##&%(***/##%%%###((%%((///%&##%#%%%#%%#%&/(%#/(((#(((%%%%&%%%%%%%%%%###%#####(##%%%%##%#&#%&#(##((((#(((##(##((#(((#%%########(####%#%%#(((###((((#(///#////###(/((#(////(////(##//(,%&%//(##////\n" +
                "///*%(&(**(##%%###((#%%##//*//&&%##%%%##%###&(#%#((((#(%%%&%%%%%***/(((((((((##((#(((/*((**#((%%%&%#((((#(((########((((##((((#(((((#((((###(((##(/(((#((//#(//(###(/((((////#(///(#(///(#(&%/(#(////\n" +
                "(//*#/&###%%####((#%%#((%,////&&%##%%###%#%%&((%#((((%%%%%%%#(*/%#######%%%%%%%%%####%%%####*,/#%#&%((((#(((####((##((((##((((#((((((((((###((((##((((#((//#(/((###/((//#///(#(///(#(////((/&&(#/(//(\n" +
                "*//**(&%%%###(/(#%%#((%%%*///(%&%##%%###%#%%&((##(((&%%%%#%%(*(##%%(########%%%%%%%%%%%%#%#(#(*,(%%&###(#(((((((((##((((##((((##((((#((((##(((((##((((#/((/(#(((###((((((///(#((//(((////(##,&&#(////\n" +
                "/(//*(&&%#(//#%%#(/#%%%&.////&&&%##%%##%%%%%&((##(%%%&%%###**###%%%%%%%%%%%%##%%%%%%%%%#%%####((/(%%%####(((##((((#((((//#(/((##((((#((((##(((((##((/(#(//(##(((###((((((/(/(#((//(##////(#/#*&%#////\n" +
                "&(/////%&&%#%%#//#%%%%(,////%&%&%##%&##%%%##&((##%%&&%%##(**##%%##%%%%%%%%%%%%%%%%%%%%%%%%%%##(%%(#&%####((((#((((#(////(#//((##((((#(#((##((/(/##///(#////(#(/((##(((/((///(#////(#(////((//#/&%#///\n" +
                "#%((#%///(%&&%##%%%#(*/////%&&%&%##%%#%%%%%%&((%#%#%%%%%#**###%###%%%%&&&&&&&&&&&&%##%#((##%###((*#%%#(#%((((#((((##///((#/((/(#((((#(#((###(///#((//((////((((((##(///((///(#/(/((((////((////,%%(//\n" +
                "%#%&(///********//////%//(%&&%%&##%%%##%%##%&(#%(#%%%%####(%##%%%&%####(##########*/#(***////#%%%#(*/*/(///(#%#(####(((/((((((##((((#((((###////#((//(#(///(((((((((((((/(//(#(////((////((////#,%&%(\n" +
                "%%%%%&%///////////////(%&&&%%%&&%##%%##%%##%%(##((&%%%%#%#(/#%&&%(#####%%%###%###/**///((///*(#%%#(*////*/(%%%(///#%#//(##((((##((((#(((((#(////(/////#(///(((((((#(/(///(//(#(////((////((////(#%%&&\n" +
                "%%%%#%&%%&&%%##(#%&&&&&&&%%%#%&&##%%%##%%##%%(####&%%%%#%#(*#%#%%#####%%%%%####%#/*///*//##//*//*/##(***/**/////(##(/*///#(((((#((((#(((((#(////((////((///(//(/(##(((///((//##////#(////((////(#####\n" +
                "%%%%#%%%%&&&&&&&&%%&&%%%%%%##%&&###%%###%##%&(#(((%%%%%#%##*#%%%%###############***//*/////(#(/**///*/**/*///*/#%%%%%%/**/##(((#((((#(((((#(///(////(##(///((////##(((/(//(((#(///(#(////((///%&,*#%&\n" +
                "%#%%##%#%%%%%%%@%%%%%##%%%%##%&&###%%###%###%(#(((#%%%%%%##(/%%%%###############****(%%%%/#**//**,,,*((/**(((((((((/#((/////((((((((#(((((#(///((////##////(#////#(/(/(((////##///(##////((///%(,.(&&\n" +
                "%#%%##%#%%%%%%&@#(#%%%##%%%##%&&##%%##%%%##%%((((((&%%%%%%##/#%%%##############/**/(%%%#//#((((*,*,,,,,,,,,,,,,,,,,,,,,,,,,,#(((((((#(((((#(///((////##////(#///(((((//((////##////#(////((//###*/#%&\n" +
                "%###(#%#%%%%%%&@%#%%%%%#%#####&&##%%%%%%%#%%&##((((&&%%%%%##/(%#&###########%#**(#(****/#**((%#,,,,,(#,,,,,***,,,,,,,*(((/##((#(((((#(((((((///((////((/(//((///(((/((/((////#((///##((/*/(*&#(/*(%%&\n" +
                "%#%###%#%%%%##&@%##%#%%(%%####&&##%%##%%%#%#&###(((&%%%%%%%(/#%#&(#####((####%/#%#/**/*#**//(,,,,,,,,.%,#/,,,,,/#,,,,*/*,#((((#######(/(((((////(////((/(//((////((((((/(////((/(//#(//(#%#*%#*%%(&%&\n" +
                "%#####%%%%%%#%&@%#%%%###%%%##%&%((%%%##%%#%%&###(((%&%%%%%%#/(%#&(#####((#####***/#%%/*#*((%,,,,,,,,,,,%,,,,,,,,.#,,,,,/#%((((%####%#((//((//////////(((((//(////(((####(////#(((%%##/*&####&&%#,/%%/\n" +
                "%###%%%#%%%%%#&&#(#%%###%#####&%#(%%##%%##%%&###(((%&%%%%%%#//##%(##########/***%%%%(/(*,,,&#*,..,,,,,*/,,,,,,,,,*(,,*#(%#((((#(#/##,/(#/**,*(##/////((((((((/////////###//(#%##/*******#%/.,/%%&&&&&\n" +
                "%##%%%%%%%%%%%&&###%#%##%#####&%##%%##%%%#%%%##((((%&%%%%#%%*/##%###########/***#%(//(,,,,,*( //@&&##@&%#(*,,..,.(*,,/#(##((//#(%%#//##(*.,.,*//%(///(((((/((/////////##%&##(/(/*,*****,**.*%@@@&%%%&\n" +
                "###%%%#%%%%%%%&&###%%#(#%#####&%##%%###%%#%#%##((((#%&%%%#%%**##%#########%##/,,%***//,**,,*,*#/((*#//.%,*#&%#.,%,,/#(((##(/((#(((#%%##(//*/***((#///((/(//((////(///#@%((***//**//*,..,,*/*,,,,*((#%\n" +
                "######%#%%%%#%&&###%%########%&###%%#(#%%#%%%##((((#%&%%%#%#/*##########%/ .  .#(**/(,*/,,,,,,,,***,,,#,,#%/(#(,,,##((((##///(##(((%#%##(((((((###*%/((/(//(////////&((****((,,,,*/,...,///((/(((//((\n" +
                "####((((((/*,***/////**((((((#(###(##%######%#(((((##&%%%%###*(##%###%(,#&%/%%%#*/#,,/#/,,,,,,(%(*,,,,,#/,,,/#/*,(##/(((##//(((#(((###(#%%######%%/(//(/(//(/////(&#//(///((*..,/*.,,./(((/**/((((((#\n" +
                "%%%%%&&&&%&%%%%%&%&&%%%%%%%%%%%&&%%%%%%%%%%%###((((##&%%%%##(*(##%%*(%%#%#******/*(*,*,,,,,,,,#.  #.#..#*(#*,,/##(##((/(#(((((/#(%%%#%%%%%###%%%%%###%#(///(////###//(////((/./*..,*//((##/**(/%#%%%%\n" +
                "%&&&&&&%&&&&&&&&&%%%%%%%&&&&&&&&&&&&&&%%%%%%%(#((((##%&&%%###/(#%*#######%((*/*/*((*((/,,,,,,*/*,,,,*//*.,/(((,#((##((((#########&&%%##########%%&&&&&#////(///#%(//(#&%&&&&&((/,,,/(/(##%%%%#%%%&&&%\n" +
                "&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&&%&%(#((((&/,,,*//*,,#(.%#(#%###&/.(#(/#*/#(/,,,,,,,,,,,,,,***,,*((*(((##%#(((###((((##(&&&&&&&&&%&&&&&&&&&%%#(//////###(/#*//////***,,,*#&#(///(%%%%&&%%&&%\n" +
                "&&&&&&%%&%&%%&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%&(#((###(###(#(/%&,,,,##(//#&%%&(..,##(((/,,,,,,,,,,,,,*,,,,,*(*#. .,#(&((/###(/(#%((%%%%%%%&%&%%&&&%%%%%%((////(/&(#%((#%(#######(*/*//*,*#&%#/(#%%%%&&&\n" +
                "%%%%%#%%#%%%%%&&##%%%%#%%#%##&@###%%###%%###&(#(###########%%,(,,&###((/&%&@&%&*#     .*(%*,(/*/((/*,,///,,*% (##(((&(((##(%(#&&&&%%&%%%#%&&&&&&%%%%%%#(////(&(#%###&&%#(((((((/#%%////*/**/(%%%%%&%&\n" +
                "#(#%######%###&#(##%%%##%###%&@#(#%%###%%###&(#(&%#%%####%%&&&/(#######/%&%%%@&&####%###%%%&%/&%*(#,..    (%%%%%,##(%(#.%#((#(&&&&%%%%%&##%%&&&&%%%%%%#(////(%%#&###%%%%%##((#%#%&&%##%//(/(//***%&##\n" +
                "###%%########%&%###%%%%%%###%&@#(#%%###%%#(#%(#(%%%%%%%#%%&&&%%%%%#####/(%&&%%%%(&@@@@&#(&@&&&#%&&&(&&&%#(&%%%%#%*#(%%&/((((#(&&&@&%%%%&&#%%&&&&%%%%%%#(/(&&%#(((////%&%(#%%#%%%%#((((((%##(((##(((/&\n" +
                "##%%%#%#######&####%%%%%%###%&&(##%%###%%#(#&(#((&%%%%%##&&&&%%%%%####(((#**%%&(###((((#((((#&##%(#(#(#((%&%%%%##%#%&(#(&((#(#&&&&%%%%%&&%%&&&&%%%%%%%&%%%%&%///*/(//***.**(%%##%%%%%%#(#//(#((((#((#\n" +
                "###%%#%###%%%%&#####%%%%%##%%&&(##%%###%%#(#&(((((&&%%%%%%&&&&%%%%####((%.  ..&%&&&&&&&&&&%%%%&&%%#%#####&&%%%%%#(#%#(#((%(#&#%%&&%%%%%%&&&%&%%%%%%%%%#%%%%%%&&&&%(*,,*,/(*,(/*,**/%(%%%%%%#((#(%/%%%\n" +
                "##%%&%%####%%%@#####%%%%%##%%&&((#%&%##%%###&((((((###&&&%&&&&&&%%##(((%**,,,.#&%%%%%&%%/.  .,&%%%%%%&(%&&%&&&&##%%%#(%(%&%%%&%##%%%%%%%%&&%%%%%%%%%%#%@@@@@@@@&%%%%##&%(*,*/(/(#/****/#&%%%#####&&#%\n" +
                "##%%%%%#%##%%%&#####%%%%%%%%%&@/#%&%%##%%%##&((/((((#//,*(%&&%&&%&#((%&&#/******/*(&%%%%,,,,,*%&&&#%(#*.,.*#((((/(%%(&&%%%%%(/#((%%&&%%%%&&&&%%&&&%%%#&@@@@@@&&@@@@@&%&%##%&&(((//#(/(////%&%%%####%%\n" +
                "%%&&&&%###%%%%&####%%%%%%&%%%&@##%%%%%%%%&%%&#(((((#((*/***,,*/#%%(,,(#%*   .,**#.&%%###//*.     (.((####,,,(((((#%#(/(#&#/(((#((%%&&%%%&&%&%&&&%%&&%%&@&@&&&&&@@@@@@@@@%%%%%&%&#(#%#(%%%%%(&&&%#%#%%\n" +
                "(//////(//(((((/////////////((((((((((((####&%%&&%%%%#///***,,,*%###((#         &#*              (*(%#%%%%%,*(////////*********///(&//*%%*#%**/&/%%/##&&&&&&&&&@@@@@@@@&%%@@@%%&%&%&%&&&&&&%&&&&&%%%&\n" +
                "/////////////////////////////*////*//////(/(##########*///*****&#%%%#%,.       .&%,.......       #%(*%%%%&&&*#*/////*///*///*///////#%#/***#&//*&&/##%@&&&&&&&@@@@@@@@@%%&@@@@%#%&&&&&&&&&&&@&&&&&&%%\n" +
                "***///*////////****/***/*//*****////////////(//((######///////(&%%%%%#,,,,,,,.,*(%,....,,,,,,....&*/,#&&&&&&#(*////******///**/*/*/****/*****///***%#%@&@&&&&&@@@@@@@@@(%&@@@@@/%&&&&&&&&&&&@&&&&&&&%\n" +
                "**********//////*///***/***/*********//**////*//*/((#####(////#&&&&&&%****,,,,,/,(,,,,,,,,,,,,,,,/.**(&&&&&&/***/*******//*****/**********/****,,**%%&&&@@&@&&&@@@@@@@@*%&@@@@@(%@&&&&&&@&&&@&&&%&&&&\n" +
                "**************///************/****//***////*//********/(##(##/#&&&&&&&#/*******(.(*/************# #**#&&&&#/************/********/***/**********/**%%%&&@@@&%#%&@@@@@@&*%@@@@@&(%@&&&&&&&&&&@&%%@@&&&\n" +
                ",,,,,,**************//********(**/**********************,**/((##%&&&&&&#*/*///%@@@@#%%(*/*****/%@@@@@%&@#(*,,,,,,,,,,,,,,,***,*********/**********/%%%&&&&&@&%&&%%((#(/##@@@@@&(#@&&&&&&&&&@@&%&%&&&@\n" +
                ",,,,,,,,,,,,,,*,,,,,************/*//***/*/****,********,,,,,,,,**//((((#%%#####@@@@@@%@&########@@@&@@@#,,,,,,,,,,,,,,,,,,,,,,*****,*************,*#%&&&&&&&&%@@@&%&@&&%&&@@@@&(#@&&&&&&&&%@@&&&%&&&@\n" +
                ".,.,,,,,,,,,,,,.,,,,,,,,,***,,,*******,,,,,************,,,,,,,,,,,,,,,,,,,,,,,,*(/*/%%(***,*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,**,,,,,,,,,,*,,,,*,**,*%#&&&&&&&%&@@@@@@@@@&&&&%###(%@@&%&&&&&&@&&&&%&&%@\n" +
                ",..,,,,,*.,.,,,*,,,,,,,.,,.,,,,,,,,,,,,,,,,,,,,,,*,,*,*,********,,,,,,,,,,,,,*,********,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,,,,,,,,**%%&&&&&&&%%@@@@@@@@&%&@@@@&%(%@&&&&&&&&&@&&&&&&&&@\n" +
                ".,........,.,..,,.....,,,.*.,,,,,,,,,,**,,,*********,,***,**,*****,,,,,,,,,,,**,******,*,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,.,*,,,,,,,,,,,,,,,,,,..,,,,.%#&&&%&&&&%@@@@@@@@%%&@@@@@%(&&&&&&&&&&&@&&&&&&&%@\n" +
                "....,,.........,..,...,,,,,,,,,,,,,,,**,**,,*,,,*,,,,,**,**,*,,,,*,,,,,,*,,,,*,,,,****,**,,,,,,,,,,,,,,,,,,,,,,,,,.,,,,,,,,*,*,,,,,,,..............(#&&&&&&&&&%@@@@@@@#%@@@@@@#(&@&&&&&&&&%@@&&&&&&&&\n" +
                " . ........,.....,..,,,,,,,,,*,,,,,,,,/,,,,,,,,,*.,.......,,..........*.,.*,,,,.,,,,,,,,,,,,,,,,,,,,,**,,,,,,,,,,,,,,,,,,,,,,,,,,....../,...... . ..%(@&&&&&&&&&&@@@@@(&@@@@@@((@@&&&&&&&&&@&&&&&&&&&\n" +
                "...,,,,.,,,((*.,..*,,,,,*,,*******,,,,.*,..,,, . **...,,.. ..,.  ..,,../. ..,*(/.,,,,,,*,,***,.,*,*,,,,,****//,,,,,,*,**(#(*,,,/**,,,,,.,,*,,,,.    .%((&%%%&%%%%#(##&*%@@@@@@(#@&&&&&&&&&&@&&&#@&&&&\n" +
                "....%@,.%@&,,#@@..#@/..,@%*((%@%//,.  .@@..@@@,.*@@%./@@@  @@@/ ..%@@@..  , .@@...(@/.#@#(((/,.,,@@@/,.,&@(/(@@/,,,,,/@@(*(@@,,%@(,,*@@,(((@&//.      *##//%&#(#////*#(%&&@@@&(%@&&&&&&&&&&@&&&@&%%@%\n" +
                "....%@*,@@,,,,,,..#@@@@@@#...#@/.  .  .@@..@@%&.&%@%./@/@,,@#@/../@##@#,,,...@@@@@@@(,#@@@@@&,..#@/@@,.,&@,.,,@@,,,,,@@*,*,*@#,%@(,,*@@,,,*@&,..         *%%(/#&////(##&&%%#%##%@&&&&&&&&&&@&&&&%%&@%\n" +
                ",..*%@/*@@../#&@*.#@/..,@#..,#@/. .  ..@@..@@,@*@*@%,/@(&&%&(@/.,@@%%@@*./...@@.,,#@/.#@/*..,..,@@%&@&,,&@,,,*@@*,,,,&@*,.,*@(,#@(*,*@@,.**@&,..... .. . ...&&%%#%%(//##*(/*&*%&&&&&&&&&&&@&&&&&&&&@%\n" +
                ",,.,%@*,/@@&%@@@,.#@/...@#...#@/. .....@@..@@.@@&,@%./@/*@@*(@/.&@*,,,@@...,,@@,.,(@(.#@@@@@@/,@@,,,%@(,&@@@@@@,,,,,,,@@@%@@%,,,@@&&@@/,,,*@&,..............&&%&&&%%#(#%%##&#/%@&&&&&&&&&&@&&%&&&&@@%";
    }
}
